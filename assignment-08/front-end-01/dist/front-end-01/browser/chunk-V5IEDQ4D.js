import{a as V,b as d,c as B,d as z,e as M,f as c,g as T,h as G,i as j,j as U,k as q}from"./chunk-VRU7KK3B.js";import{l as A}from"./chunk-SDTS7ZUR.js";import{Ba as E,Da as h,Fa as C,Ga as y,Ha as S,Ia as w,Ja as n,Ka as e,La as s,M as O,Ma as f,Na as b,Oa as p,Pa as i,Qa as g,R as D,Ra as k,Sa as N,V as I,ba as u,ca as P,qa as m,ra as F}from"./chunk-U35MBERR.js";var _=(()=>{class o{constructor(t){this.http=t,this.token="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkBleGFtcGxlLmNvbSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkFkbWluIiwidWlkIjoiMyIsImV4cCI6MjA3MTU0ODgxMSwiaXNzIjoiUGF0aWVudFZpc2l0TWFuYWdlciIsImF1ZCI6IlBhdGllbnRWaXNpdE1hbmFnZXJVc2VycyJ9.ppSrnsaIFitQrm8CEbHw66VrdfOLjFfTwXveM9zrQTA",this.baseUrl="http://172.16.103.84:85/api/Patients"}getAllPatients(){return this.http.get(this.baseUrl,{headers:{Authorization:"Bearer "+this.token}})}getPatientByID(t){return this.http.get(this.baseUrl+`/${t}`,{headers:{Authorization:"Bearer "+this.token}})}deletePatientByID(t){return this.http.delete(this.baseUrl+`/${t}`,{headers:{Authorization:"Bearer "+this.token}})}AddNewPatient(t){return this.http.post(this.baseUrl,t,{headers:{Authorization:"Bearer "+this.token}})}UpdatePatient(t,a){return this.http.put(this.baseUrl+`/${t}`,a,{headers:{Authorization:"Bearer "+this.token}})}static{this.\u0275fac=function(a){return new(a||o)(D(A))}}static{this.\u0275prov=O({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function X(o,v){if(o&1){let t=f();n(0,"form",3),b("ngSubmit",function(){u(t);let r=p();return P(r.onSubmit())}),n(1,"div")(2,"label",4),i(3,"Patient ID"),e(),s(4,"br")(5,"input",5),e(),n(6,"div")(7,"label",6),i(8,"Patient Name"),e(),s(9,"br")(10,"input",7),e(),n(11,"div")(12,"label",8),i(13,"Patient Email"),e(),s(14,"br")(15,"input",9),e(),n(16,"div")(17,"label",10),i(18,"Patient Phone"),e(),s(19,"br")(20,"input",11),e(),n(21,"div")(22,"label",12),i(23,"Patient Description"),e(),s(24,"br")(25,"textarea",13),e(),n(26,"div")(27,"button",14),i(28,"Add Patient"),e(),n(29,"button",0),b("click",function(){u(t);let r=p();return P(r.deactivateForm())}),i(30,"cancel"),e()()()}if(o&2){let t=p();h("formGroup",t.addPatientForm),m(27),h("disabled",!t.addPatientForm.valid)}}function Z(o,v){if(o&1){let t=f();n(0,"form",15),b("ngSubmit",function(){u(t);let r=p();return P(r.onEdit())}),n(1,"div")(2,"label",4),i(3,"Patient ID"),e(),s(4,"br")(5,"input",5),e(),n(6,"div")(7,"label",16),i(8,"Visit ID"),e(),s(9,"br")(10,"input",17),e(),n(11,"div")(12,"label",6),i(13,"Patient Name"),e(),s(14,"br")(15,"input",7),e(),n(16,"div")(17,"label",8),i(18,"Patient Email"),e(),s(19,"br")(20,"input",9),e(),n(21,"div")(22,"label",10),i(23,"Patient Phone"),e(),s(24,"br")(25,"input",11),e(),n(26,"div")(27,"label",12),i(28,"Patient Description"),e(),s(29,"br")(30,"textarea",13),e(),n(31,"div")(32,"button",14),i(33,"Edit Patient Record"),e(),n(34,"button",0),b("click",function(){u(t);let r=p();return P(r.deactivateEditForm())}),i(35,"cancel"),e()()()}if(o&2){let t=p();h("formGroup",t.editPatientForm),m(32),h("disabled",!t.editPatientForm.valid)}}function $(o,v){if(o&1){let t=f();n(0,"tr")(1,"td"),i(2),e(),n(3,"td"),i(4),e(),n(5,"td"),i(6),e(),n(7,"td"),i(8),e(),n(9,"td"),i(10),e(),n(11,"td",18)(12,"button",19),b("click",function(){let r=u(t).$implicit,l=p();return P(l.activateEditForm(r))}),i(13,"Edit"),e(),n(14,"button",20),b("click",function(){let r=u(t).$implicit,l=p();return P(l.deleteAction(r.patientID))}),i(15,"Delete"),e()()()}if(o&2){let t=v.$implicit;m(2),g(t.patientID),m(2),g(t.patientName),m(2),g(t.patientEmail),m(2),g(t.patientPhone),m(2),g(t.patientDescription)}}var tt=(()=>{class o{constructor(t){this.dataService=t,this.AddBtnPressed=!1,this.EditBtnPressed=!1}activateForm(){this.AddBtnPressed=!0}deactivateForm(){this.AddBtnPressed=!1}onSubmit(){let t={patientID:this.addPatientForm.value.patientID,patientName:this.addPatientForm.value.patientName,patientEmail:this.addPatientForm.value.patientEmail,patientPhone:this.addPatientForm.value.patientPhone,patientDescription:this.addPatientForm.value.patientDescription},a={patientID:this.addPatientForm.value.patientID,visitID:null,patientName:this.addPatientForm.value.patientName,patientEmail:this.addPatientForm.value.patientEmail,patientPhone:this.addPatientForm.value.patientPhone,patientDescription:this.addPatientForm.value.patientDescription};this.AllPatients.some(r=>r.patientID===a.patientID)&&a.patientID!==null?alert("The patient ID you just entered already exists. Please  try a unique value for each patient"):(this.dataService.AddNewPatient(t).subscribe({next:r=>{this.AllPatients.push(a),alert("Patient Added Successfully"),console.log("Patient Added successfully")},error:r=>{alert(r)}}),this.AddBtnPressed=!1)}activateEditForm(t){let a=this.editPatientForm.get("patientID"),r=this.editPatientForm.get("visitID"),l=this.editPatientForm.get("patientName"),x=this.editPatientForm.get("patientEmail"),J=this.editPatientForm.get("patientPhone"),L=this.editPatientForm.get("patientDescription");a?.setValue(t.patientID),r?.setValue(t.visitID),l?.setValue(t.patientName),x?.setValue(t.patientEmail),J?.setValue(t.patientPhone),L?.setValue(t.patientDescription),this.EditBtnPressed=!0}deactivateEditForm(){this.EditBtnPressed=!1}onEdit(){let t={patientID:this.editPatientForm.value.patientID,visitID:this.editPatientForm.value.visitID,patientName:this.editPatientForm.value.patientName,patientEmail:this.editPatientForm.value.patientEmail,patientPhone:this.editPatientForm.value.patientPhone,patientDescription:this.editPatientForm.value.patientDescription},a=0;this.AllPatients.forEach(r=>{r.patientID===t.patientID&&(a=a+1)}),a>1&&t.visitID!==null?alert("The visit ID you just entered already exists. Please  try a unique value for each patient"):(console.log("patient ID: ",t.patientID),this.dataService.UpdatePatient(t.patientID,t).subscribe({next:r=>{let l=this.AllPatients.filter(x=>x.patientID==t.patientID)[0];l.patientID=t.patientID,l.visitID=t.visitID,l.patientName=t.patientName,l.patientEmail=t.patientEmail,l.patientPhone=t.patientPhone,l.patientDescription=t.patientDescription,alert("The record of the patient has been updated")}}),console.log("Hello world"),this.EditBtnPressed=!1)}deleteAction(t){this.dataService.deletePatientByID(t).subscribe({next:a=>{alert("deleted patient record successfully"),this.AllPatients.splice(this.AllPatients.findIndex(r=>r.patientID===t),1)}})}ngOnInit(){this.editPatientForm=new M({patientID:new c(null,[d.required]),patientName:new c("",[d.required,d.minLength(10)]),visitID:new c(null),patientEmail:new c("",[d.required,d.email,d.minLength(10)]),patientPhone:new c("",[d.required]),patientDescription:new c("")}),this.addPatientForm=new M({patientID:new c(null,[d.required]),patientName:new c("",[d.required,d.minLength(10)]),patientEmail:new c("",[d.required,d.email,d.minLength(10)]),patientPhone:new c("",[d.required]),patientDescription:new c("")}),this.dataService.getAllPatients().subscribe({next:t=>{this.AllPatients=t,this.last_id=this.AllPatients[this.AllPatients.length-1].patientID;let a=this.addPatientForm.get("patientID");console.log("Hello"),console.log(this.last_id),a?.setValue(Number(this.last_id)+1),a?.setValidators([d.required,d.min(Number(this.last_id)+1)])},error:t=>{alert(t)}})}static{this.\u0275fac=function(a){return new(a||o)(F(_))}}static{this.\u0275cmp=I({type:o,selectors:[["app-patient-dashboard"]],standalone:!0,features:[k([_]),N],decls:24,vars:2,consts:[[3,"click"],["id","addPatientForm",3,"formGroup"],["id","editPatientForm",3,"formGroup"],["id","addPatientForm",3,"ngSubmit","formGroup"],["for","patientID"],["formControlName","patientID","type","number","id","patientID","name","patientID"],["for","patientName"],["formControlName","patientName","type","text","id","patientName","name","patientName"],["for","patientEmail"],["formControlName","patientEmail","type","text","id","patientEmail","name","patientEmail"],["for","patientPhone"],["formControlName","patientPhone","type","text","id","patientPhone","name","patientPhone"],["for","patientDescription"],["formControlName","patientDescription","id","patientDescription","name","patientDescription"],["type","submit",3,"disabled"],["id","editPatientForm",3,"ngSubmit","formGroup"],["for","visitID"],["formControlName","visitID","type","number","id","visitID","name","visitID"],[1,"actions"],["type","button",1,"btn","btn-edit",3,"click"],["type","button",1,"btn","btn-delete",3,"click"]],template:function(a,r){a&1&&(n(0,"h2"),i(1,"Patients"),e(),n(2,"button",0),b("click",function(){return r.activateForm()}),i(3,"+Add New Patient"),e(),E(4,X,31,2,"form",1)(5,Z,36,2,"form",2),n(6,"table")(7,"thead")(8,"tr")(9,"th"),i(10,"Patient ID"),e(),n(11,"th"),i(12,"Patient Name"),e(),n(13,"th"),i(14,"Patient Email"),e(),n(15,"th"),i(16,"Patient Phone"),e(),n(17,"th"),i(18,"Patient Description"),e(),n(19,"th"),i(20,"Actions"),e()()(),n(21,"tbody"),S(22,$,16,5,"tr",null,y),e()()),a&2&&(m(4),C(4,r.AddBtnPressed?4:-1),m(),C(5,r.EditBtnPressed?5:-1),m(17),w(r.AllPatients))},dependencies:[q,T,V,G,B,z,j,U],styles:['[_ngcontent-%COMP%]:root{--bg: #f6f8fb;--card: #ffffff;--text: #1f2937;--muted: #6b7280;--border: #e5e7eb;--stripe: #f9fafb;--accent-600: #059669;--accent-700: #047857}@media (prefers-color-scheme: dark){[_ngcontent-%COMP%]:root{--bg: #0b1220;--card: #0f172a;--text: #e5e7eb;--muted: #94a3b8;--border: #1f2937;--stripe: #0b152a;--accent-600: #10b981;--accent-700: #059669}}body[_ngcontent-%COMP%]{background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,"Apple Color Emoji","Segoe UI Emoji";margin:0;padding:1.5rem}table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;background:var(--card);border:1px solid var(--border);border-radius:14px;overflow:hidden;box-shadow:0 10px 24px #02081414}caption[_ngcontent-%COMP%]{text-align:left;font-weight:700;font-size:1.125rem;padding:1rem 1.25rem;color:var(--text)}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;color:#4a30b4;text-align:left;font-weight:700;letter-spacing:.02em;text-transform:uppercase;font-size:.85rem;padding:.9rem 1rem;background:linear-gradient(180deg,var(--accent-600),var(--accent-700));border-bottom:1px solid rgba(255,255,255,.15)}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.9rem 1rem;border-bottom:1px solid var(--border);vertical-align:middle}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:var(--stripe)}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#10b98114;transition:background .2s ease}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}td[_ngcontent-%COMP%]:first-child{text-align:center;font-variant-numeric:tabular-nums;color:var(--muted)}@media (max-width: 640px){body[_ngcontent-%COMP%]{padding:1rem}table[_ngcontent-%COMP%]{font-size:.95rem}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], caption[_ngcontent-%COMP%]{padding:.75rem .8rem}}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;font-size:.85rem;padding:.45rem .7rem;border-radius:10px;border:1px solid transparent;background:transparent;cursor:pointer;line-height:1;-webkit-user-select:none;user-select:none;transition:background .2s ease,border-color .2s ease,transform .04s ease;margin-right:.4rem}.btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.btn-edit[_ngcontent-%COMP%]{color:var(--accent-700);border-color:var(--accent-700)}.btn-edit[_ngcontent-%COMP%]:hover{background:#10b98114;border-color:var(--accent-600)}.btn-delete[_ngcontent-%COMP%]{color:var(--danger-700);border-color:var(--danger-700)}.btn-delete[_ngcontent-%COMP%]:hover{background:#ef44441a;border-color:var(--danger-600)}@media (max-width: 640px){body[_ngcontent-%COMP%]{padding:1rem}.patients-table[_ngcontent-%COMP%]{font-size:.95rem}.patients-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .patients-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .patients-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{padding:.75rem .8rem}}[_ngcontent-%COMP%]:root{--bg: #f6f8fb;--card: #ffffff;--text: #0f172a;--muted: #64748b;--border: #e5e7eb;--ring: #c7d2fe;--error: #ef4444;--error-bg: #fee2e2}@media (prefers-color-scheme: dark){[_ngcontent-%COMP%]:root{--bg: #0b1220;--card: #0f172a;--text: #e5e7eb;--muted: #94a3b8;--border: #1f2937;--ring: #3730a3;--error: #f87171;--error-bg: #3b0a0a}}body[_ngcontent-%COMP%]{background:var(--bg)}form#addPatientForm[_ngcontent-%COMP%], form#editPatientForm[_ngcontent-%COMP%]{--accent: #0ea5e9;--accent-700: #0369a1;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:16px;max-width:900px;margin:24px auto;padding:20px;background:var(--card);color:var(--text);border:1px solid var(--border);border-radius:16px;box-shadow:0 12px 28px #02081714;position:relative}form#addPatientForm[_ngcontent-%COMP%]:before, form#editPatientForm[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0 0 auto;height:4px;background:var(--accent);border-top-left-radius:16px;border-top-right-radius:16px}form#addPatientForm[_ngcontent-%COMP%]{--accent:#0ea5e9;--accent-700:#0369a1}form#editPatientForm[_ngcontent-%COMP%]{--accent:#8b5cf6;--accent-700:#6d28d9}form#addPatientForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], form#editPatientForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:block}form#addPatientForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child, form#editPatientForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{grid-column:1/-1;display:flex;gap:12px;justify-content:flex-end;margin-top:6px}form#addPatientForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:has(textarea), form#editPatientForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:has(textarea){grid-column:1/-1}label[_ngcontent-%COMP%]{display:block;font-weight:700;font-size:.95rem;margin:6px 0;color:var(--text)}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:12px;background:#fff;color:var(--text);font-size:1rem;outline:none;transition:border-color .15s ease,box-shadow .15s ease,background .15s ease}textarea[_ngcontent-%COMP%]{min-height:120px;resize:vertical}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 4px color-mix(in srgb,var(--accent) 20%,transparent)}input.ng-invalid.ng-touched[_ngcontent-%COMP%], textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:var(--error);background:color-mix(in srgb,var(--error-bg) 60%,transparent)}button[_ngcontent-%COMP%]{appearance:none;border:1px solid transparent;border-radius:12px;padding:10px 16px;font-weight:700;cursor:pointer;transition:transform .02s ease,background .15s ease,border-color .15s ease,color .15s ease}form#addPatientForm[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%], form#editPatientForm[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background:var(--accent);color:#fff;border-color:var(--accent)}form#addPatientForm[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover, form#editPatientForm[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:var(--accent-700);border-color:var(--accent-700)}button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form#addPatientForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%], form#editPatientForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{background:transparent;color:var(--accent-700);border-color:var(--accent-700)}form#addPatientForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]:hover, form#editPatientForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--accent) 10%,transparent)}button[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed;filter:grayscale(.25)}@media (max-width: 720px){form#addPatientForm[_ngcontent-%COMP%], form#editPatientForm[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:16px}}']})}}return o})();export{tt as PatientDashboardComponent};
