import{a as z,b as d,c as V,d as B,e as P,f as s,g as T,h as G,i as j,j as U,k as q}from"./chunk-VRU7KK3B.js";import{l as A}from"./chunk-SDTS7ZUR.js";import{Ba as E,Da as D,Fa as C,Ga as w,Ha as k,Ia as y,Ja as o,Ka as e,La as l,M,Ma as f,Na as b,Oa as u,Pa as r,Qa as h,R as I,Ra as S,Sa as N,V as O,ba as p,ca as g,qa as m,ra as F}from"./chunk-U35MBERR.js";var v=(()=>{class a{constructor(t){this.http=t,this.token="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbkBleGFtcGxlLmNvbSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkFkbWluIiwidWlkIjoiMyIsImV4cCI6MjA3MTU1MjQ2NiwiaXNzIjoiUGF0aWVudFZpc2l0TWFuYWdlciIsImF1ZCI6IlBhdGllbnRWaXNpdE1hbmFnZXJVc2VycyJ9.dD7CT-3BeuIcXlAM6ggGKXZFYKP4MXkPfMiK0o6k2Tk",this.baseUrl="http://172.16.103.84:85/api/Doctors"}getAllDoctors(){return this.http.get(this.baseUrl,{headers:{Authorization:"Bearer "+this.token}})}getDoctorByID(t){return this.http.get(this.baseUrl+`/${t}`,{headers:{Authorization:"Bearer "+this.token}})}deleteDoctorByID(t){return this.http.delete(this.baseUrl+`/${t}`,{headers:{Authorization:"Bearer "+this.token}})}AddNewDoctor(t){return this.http.post(this.baseUrl,t,{headers:{Authorization:"Bearer "+this.token}})}UpdateDoctor(t,n){return this.http.put(this.baseUrl+`/${t}`,n,{headers:{Authorization:"Bearer "+this.token}})}static{this.\u0275fac=function(n){return new(n||a)(I(A))}}static{this.\u0275prov=M({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();function Y(a,_){if(a&1){let t=f();o(0,"form",3),b("ngSubmit",function(){p(t);let i=u();return g(i.onSubmit())}),o(1,"div")(2,"label",4),r(3,"Doctor ID"),e(),l(4,"br")(5,"input",5),e(),o(6,"div")(7,"label",6),r(8,"Doctor Name"),e(),l(9,"br")(10,"input",7),e(),o(11,"div")(12,"label",8),r(13,"Doctor Email"),e(),l(14,"br")(15,"input",9),e(),o(16,"div")(17,"label",10),r(18,"Doctor Phone"),e(),l(19,"br")(20,"input",11),e(),o(21,"div")(22,"label",12),r(23,"Doctor Description"),e(),l(24,"br")(25,"textarea",13),e(),o(26,"div")(27,"button",14),r(28,"Add Doctor"),e(),o(29,"button",0),b("click",function(){p(t);let i=u();return g(i.deactivateForm())}),r(30,"cancel"),e()()()}if(a&2){let t=u();D("formGroup",t.addDoctorForm),m(27),D("disabled",!t.addDoctorForm.valid)}}function Z(a,_){if(a&1){let t=f();o(0,"form",15),b("ngSubmit",function(){p(t);let i=u();return g(i.onEdit())}),o(1,"div")(2,"label",4),r(3,"Doctor ID"),e(),l(4,"br")(5,"input",5),e(),o(6,"div")(7,"label",16),r(8,"Visit ID"),e(),l(9,"br")(10,"input",17),e(),o(11,"div")(12,"label",6),r(13,"Doctor Name"),e(),l(14,"br")(15,"input",7),e(),o(16,"div")(17,"label",8),r(18,"Doctor Email"),e(),l(19,"br")(20,"input",9),e(),o(21,"div")(22,"label",10),r(23,"Doctor Phone"),e(),l(24,"br")(25,"input",11),e(),o(26,"div")(27,"label",12),r(28,"Doctor Description"),e(),l(29,"br")(30,"textarea",13),e(),o(31,"div")(32,"button",14),r(33,"Edit Doctor Details"),e(),o(34,"button",0),b("click",function(){p(t);let i=u();return g(i.deactivateForm())}),r(35,"cancel"),e()()()}if(a&2){let t=u();D("formGroup",t.editDoctorForm),m(32),D("disabled",!t.editDoctorForm.valid)}}function $(a,_){if(a&1){let t=f();o(0,"tr")(1,"td"),r(2),e(),o(3,"td"),r(4),e(),o(5,"td"),r(6),e(),o(7,"td"),r(8),e(),o(9,"td"),r(10),e(),o(11,"td",18)(12,"button",19),b("click",function(){let i=p(t).$implicit,c=u();return g(c.activateEditForm(i))}),r(13,"Edit"),e(),o(14,"button",20),b("click",function(){let i=p(t).$implicit,c=u();return g(c.deleteAction(i.doctorID))}),r(15,"Delete"),e()()()}if(a&2){let t=_.$implicit;m(2),h(t.doctorID),m(2),h(t.doctorName),m(2),h(t.doctorEmail),m(2),h(t.doctorPhone),m(2),h(t.specialization)}}var tt=(()=>{class a{constructor(t){this.dataService=t,this.AddBtnPressed=!1,this.EditBtnPressed=!1}activateForm(){this.AddBtnPressed=!0}deactivateForm(){this.AddBtnPressed=!1}onSubmit(){let t={doctorID:this.addDoctorForm.value.doctorID,doctorName:this.addDoctorForm.value.doctorName,doctorEmail:this.addDoctorForm.value.doctorEmail,doctorPhone:this.addDoctorForm.value.doctorPhone,specialization:this.addDoctorForm.value.specialization},n={doctorID:this.addDoctorForm.value.doctorID,visitID:null,doctorName:this.addDoctorForm.value.doctorName,doctorEmail:this.addDoctorForm.value.doctorEmail,doctorPhone:this.addDoctorForm.value.doctorPhone,specialization:this.addDoctorForm.value.specialization};this.AllDoctors.some(i=>i.doctorID===n.doctorID)&&n.doctorID!==null?alert("The doctor ID you just entered already exists. Please  try a unique value for each patient"):(this.dataService.AddNewDoctor(t).subscribe({next:i=>{this.AllDoctors.push(n),alert("Doctor Added Successfully"),console.log("Doctor Added successfully")},error:i=>{alert(i)}}),this.AddBtnPressed=!1)}activateEditForm(t){let n=this.editDoctorForm.get("doctorID"),i=this.editDoctorForm.get("visitID"),c=this.editDoctorForm.get("doctorName"),x=this.editDoctorForm.get("doctorEmail"),J=this.editDoctorForm.get("doctorPhone"),W=this.editDoctorForm.get("specialization");n?.setValue(t.doctorID),i?.setValue(t.visitID),c?.setValue(t.doctorName),x?.setValue(t.doctorEmail),J?.setValue(t.doctorPhone),W?.setValue(t.specialization),this.EditBtnPressed=!0}deactivateEditForm(){this.EditBtnPressed=!1}onEdit(){let t={doctorID:this.editDoctorForm.value.doctorID,visitID:this.editDoctorForm.value.visitID,doctorName:this.editDoctorForm.value.doctorName,doctorEmail:this.editDoctorForm.value.doctorEmail,doctorPhone:this.editDoctorForm.value.doctorPhone,specialization:this.editDoctorForm.value.specialization},n=0;this.AllDoctors.forEach(i=>{i.doctorID===t.doctorID&&(n=n+1)}),n>1&&t.visitID!==null?alert("The visit ID you just entered already exists. Please  try a unique value for each patient"):(console.log("doctor ID: ",t.doctorID),this.dataService.UpdateDoctor(t.doctorID,t).subscribe({next:i=>{let c=this.AllDoctors.filter(x=>x.doctorID==t.doctorID)[0];c.doctorID=t.doctorID,c.visitID=t.visitID,c.doctorName=t.doctorName,c.doctorEmail=t.doctorEmail,c.doctorPhone=t.doctorPhone,c.specialization=t.specialization,alert("The record of the doctor has been updated")}}),console.log("Hello world"),this.EditBtnPressed=!1)}deleteAction(t){console.log(t),this.dataService.deleteDoctorByID(t).subscribe({next:n=>{alert("deleted patient record successfully"),this.AllDoctors.splice(this.AllDoctors.findIndex(i=>i.doctorID===t),1)}})}ngOnInit(){this.editDoctorForm=new P({doctorID:new s(null,[d.required]),doctorName:new s("",[d.required,d.minLength(10)]),visitID:new s(null),doctorEmail:new s("",[d.required,d.email,d.minLength(10)]),doctorPhone:new s("",[d.required]),specialization:new s("")}),this.addDoctorForm=new P({doctorID:new s(null,[d.required]),doctorName:new s("",[d.required,d.minLength(10)]),doctorEmail:new s("",[d.required,d.email,d.minLength(10)]),doctorPhone:new s("",[d.required]),specialization:new s("")}),this.dataService.getAllDoctors().subscribe({next:t=>{this.AllDoctors=t,this.last_id=this.AllDoctors[this.AllDoctors.length-1].doctorID;let n=this.addDoctorForm.get("doctorID");console.log("Hello"),console.log(this.last_id),n?.setValue(Number(this.last_id)+1),n?.setValidators([d.required,d.min(Number(this.last_id)+1)])},error:t=>{alert(t)}})}static{this.\u0275fac=function(n){return new(n||a)(F(v))}}static{this.\u0275cmp=O({type:a,selectors:[["app-doctor-dashboard"]],standalone:!0,features:[S([v]),N],decls:24,vars:2,consts:[[3,"click"],["id","addDoctorForm",3,"formGroup"],["id","editDoctorForm",3,"formGroup"],["id","addDoctorForm",3,"ngSubmit","formGroup"],["for","doctorID"],["formControlName","doctorID","type","number","id","doctorID","name","doctorID"],["for","doctorName"],["formControlName","doctorName","type","text","id","doctorName","name","doctorName"],["for","doctorEmail"],["formControlName","doctorEmail","type","text","id","doctorEmail","name","doctorEmail"],["for","doctorPhone"],["formControlName","doctorPhone","type","text","id","doctorPhone","name","doctorPhone"],["for","specialization"],["formControlName","specialization","id","specialization","name","specialization"],["type","submit",3,"disabled"],["id","editDoctorForm",3,"ngSubmit","formGroup"],["for","visitID"],["formControlName","visitID","type","number","id","visitID","name","visitID"],[1,"actions"],["type","button",1,"btn","btn-edit",3,"click"],["type","button",1,"btn","btn-delete",3,"click"]],template:function(n,i){n&1&&(o(0,"h2"),r(1,"Doctors"),e(),o(2,"button",0),b("click",function(){return i.activateForm()}),r(3,"+Add New Doctor"),e(),E(4,Y,31,2,"form",1)(5,Z,36,2,"form",2),o(6,"table")(7,"thead")(8,"tr")(9,"th"),r(10,"Doctor ID"),e(),o(11,"th"),r(12,"Doctor Name"),e(),o(13,"th"),r(14,"Doctor Email"),e(),o(15,"th"),r(16,"Doctor Phone"),e(),o(17,"th"),r(18,"Doctor Description"),e(),o(19,"th"),r(20,"Actions"),e()()(),o(21,"tbody"),k(22,$,16,5,"tr",null,w),e()()),n&2&&(m(4),C(4,i.AddBtnPressed?4:-1),m(),C(5,i.EditBtnPressed?5:-1),m(17),y(i.AllDoctors))},dependencies:[q,T,z,G,V,B,j,U],styles:['@charset "UTF-8";[_ngcontent-%COMP%]:root{--bg: #f6f8fb;--card: #ffffff;--text: #0f172a;--muted: #64748b;--border: #e5e7eb;--stripe: #f9fafb;--shadow: 0 14px 38px rgba(2, 8, 23, .08);--blue-500: #3b82f6;--blue-600: #2563eb;--blue-700: #1d4ed8;--violet-500: #8b5cf6;--violet-700: #6d28d9;--danger-600: #dc2626;--danger-700: #b91c1c;--ok-600: #059669;--ok-700: #047857}@media (prefers-color-scheme: dark){[_ngcontent-%COMP%]:root{--bg: #0b1220;--card: #0f172a;--text: #e5e7eb;--muted: #94a3b8;--border: #1f2937;--stripe: #0b152a;--shadow: 0 14px 38px rgba(0,0,0,.5);--blue-600: #3b82f6;--blue-700: #2563eb;--violet-500: #a78bfa;--violet-700: #7c3aed}}body[_ngcontent-%COMP%]{background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica Neue,Arial;margin:0;padding:24px}h2[_ngcontent-%COMP%]{margin:0 0 12px;font-size:clamp(1.25rem,1.1rem + .8vw,1.8rem);letter-spacing:.2px}h2[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{appearance:none;border:1px solid transparent;background:linear-gradient(180deg,var(--blue-600),var(--blue-700));color:#1a1818;padding:10px 16px;border-radius:12px;font-weight:700;box-shadow:var(--shadow);cursor:pointer;transition:transform .02s ease,filter .15s ease,box-shadow .15s ease;margin-bottom:16px}h2[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]:hover{filter:brightness(1.08)}h2[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form#addDoctorForm[_ngcontent-%COMP%], form#editDoctorForm[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:16px;max-width:960px;margin:14px 0 24px;padding:20px;background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);position:relative}form#addDoctorForm[_ngcontent-%COMP%]:before, form#editDoctorForm[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0 0 auto;height:4px;border-top-left-radius:16px;border-top-right-radius:16px}form#addDoctorForm[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,var(--blue-600),var(--blue-700))}form#editDoctorForm[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,var(--violet-500),var(--violet-700))}form#addDoctorForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child, form#editDoctorForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{grid-column:1/-1;display:flex;gap:12px;justify-content:flex-end}@supports (selector(:has(*))){form#addDoctorForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:has(textarea), form#editDoctorForm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:has(textarea){grid-column:1/-1}}label[_ngcontent-%COMP%]{display:block;font-weight:700;margin:6px 0}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:12px;background:#fff;color:var(--text);font-size:1rem;outline:none;transition:border-color .15s ease,box-shadow .15s ease,background .15s ease}textarea[_ngcontent-%COMP%]{min-height:120px;resize:vertical}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:var(--blue-600);box-shadow:0 0 0 4px #2563eb2e}input.ng-invalid.ng-touched[_ngcontent-%COMP%], textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:var(--danger-600);background:#ef44440f}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{appearance:none;border:1px solid transparent;border-radius:12px;padding:10px 16px;font-weight:700;cursor:pointer;transition:transform .02s ease,filter .15s ease,background .15s ease,border-color .15s ease}form#addDoctorForm[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background:linear-gradient(180deg,var(--blue-600),var(--blue-700));color:#161414;border-color:var(--blue-700)}form#editDoctorForm[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background:linear-gradient(180deg,var(--violet-500),var(--violet-700));color:#100f0f;border-color:var(--violet-700)}form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{filter:brightness(1.08)}form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{background:transparent;color:var(--blue-700);border-color:var(--blue-700)}form#editDoctorForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{color:var(--violet-700);border-color:var(--violet-700)}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]:hover{background:#2563eb14}form#editDoctorForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]:hover{background:#6d28d91a}button[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;margin-top:18px;background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden;box-shadow:var(--shadow)}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;text-align:left;padding:.9rem 1rem;font-size:.85rem;text-transform:uppercase;letter-spacing:.03em;color:#151111;background:linear-gradient(180deg,var(--blue-700),#0b3aa6);border-bottom:1px solid rgba(255,255,255,.15)}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.9rem 1rem;border-bottom:1px solid var(--border);vertical-align:middle}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background:var(--stripe)}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#3b82f614;transition:background .2s ease}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}td.actions[_ngcontent-%COMP%]{white-space:nowrap}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;font-size:.85rem;padding:.45rem .7rem;border-radius:10px;border:1px solid transparent;background:transparent;cursor:pointer;line-height:1;-webkit-user-select:none;user-select:none;transition:background .15s ease,border-color .15s ease,transform .02s ease,color .15s ease;margin-right:.4rem}.btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.btn-edit[_ngcontent-%COMP%]{color:var(--ok-700);border-color:var(--ok-700)}.btn-edit[_ngcontent-%COMP%]:hover{background:#0596691a;border-color:var(--ok-600)}.btn-delete[_ngcontent-%COMP%]{color:var(--danger-700);border-color:var(--danger-700)}.btn-delete[_ngcontent-%COMP%]:hover{background:#ef44441a;border-color:var(--danger-600)}@media (max-width: 900px){form#addDoctorForm[_ngcontent-%COMP%], form#editDoctorForm[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:16px}body[_ngcontent-%COMP%]{padding:16px}table[_ngcontent-%COMP%]{font-size:.96rem}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.75rem .85rem}}']})}}return a})();export{tt as DoctorDashboardComponent};
