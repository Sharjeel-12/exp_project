import{c as y}from"./chunk-CCLI6DUF.js";import{a as w,b as s,c as x,d as v,e as _,f as d,g as P,i as M,j as S,k as O}from"./chunk-VRU7KK3B.js";import{l as C}from"./chunk-SDTS7ZUR.js";import{Da as c,Ja as n,Ka as i,La as p,M as u,Na as b,Pa as r,R as g,Sa as h,V as f,qa as l,ra as m}from"./chunk-U35MBERR.js";var k=(()=>{class o{constructor(e){this.http=e,this.base_url="http://172.16.103.84:85/api/Auth/login",this.isAdmin=!1,this.isReceptionist=!1}getLoginResponse(e,t){return this.http.post(this.base_url,{email:e,password:t})}static{this.\u0275fac=function(t){return new(t||o)(g(C))}}static{this.\u0275prov=u({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var D=(()=>{class o{constructor(e,t){this.loginServcie=e,this.router=t,this.isAdmin=!1,this.isReceptionist=!1}ngOnInit(){this.loginForm=new _({email:new d(null,[s.required,s.email]),password:new d(null,[s.required,s.minLength(3)])})}validateUser(){this.loginServcie.getLoginResponse(this.loginForm.value.email,this.loginForm.value.password).subscribe({next:e=>{try{e?.token&&sessionStorage.setItem("access_token",e.token),e?.role&&sessionStorage.setItem("role",e.role),e?.role==="Admin"?this.router.navigate(["/admin"]):e?.role==="Receptionist"&&this.router.navigate(["/receptionist"])}catch{}this.userToken=e.token,this.loginError=e.error,this.userRole=e.role,this.userToken?(sessionStorage.setItem("token",this.userToken),alert(`login Successful as: ${this.userRole}`)):alert(this.loginError),this.userRole==="Admin"&&(this.isAdmin=!0),this.userRole==="Receptionist"&&(this.isReceptionist=!0)}})}static{this.\u0275fac=function(t){return new(t||o)(m(k),m(y))}}static{this.\u0275cmp=f({type:o,selectors:[["app-login-page"]],standalone:!0,features:[h],decls:12,vars:2,consts:[[1,"login-container"],[3,"ngSubmit","formGroup"],["for","username"],["type","text","id","username","placeholder","Enter username","formControlName","email"],["for","password"],["type","password","id","password","placeholder","Enter password","formControlName","password"],["type","submit",3,"disabled"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"h2"),r(2,"Login"),i(),n(3,"form",1),b("ngSubmit",function(){return a.validateUser()}),n(4,"label",2),r(5,"Username"),i(),p(6,"input",3),n(7,"label",4),r(8,"Password"),i(),p(9,"input",5),n(10,"button",6),r(11,"Login"),i()()()),t&2&&(l(3),c("formGroup",a.loginForm),l(7),c("disabled",!a.loginForm.valid))},dependencies:[O,P,w,x,v,M,S],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:#f5f7fa;display:flex;align-items:center;justify-content:center}.login-container[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;box-shadow:0 8px 16px #0000001a;width:100%;max-width:400px;box-sizing:border-box}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;color:#333}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#333}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:.75rem;margin-bottom:1.25rem;border:1px solid #ccc;border-radius:8px;box-sizing:border-box;font-size:1rem;transition:border-color .3s ease}input[type=text][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#007bff;color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:1.5rem;margin:0 1rem}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], button[type=submit][_ngcontent-%COMP%]{font-size:.95rem}}"]})}}return o})();export{D as a};
